<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{admin/layout/default_admin}">
<th:block layout:fragment="customContents">
    <div class="row">
        <div class="col-md-12">
            <div class="x_panel">
                <div class="x_title">
                    <h2>자가검증 질문 등록<small>자가검증 질문을 입력하세요.</small></h2>
                    <div class="clearfix"></div>
                </div>
                <div class="x_panel">
                    <div class="row">
                        <h1>
                            [[${cropsSelfCheck.getCropsName()}]] <small>자가검증 질문 등록</small>
                        </h1>
                        <h3>
                            <small>자가검증 질문 코드:  </small>[[${cropsSelfCheck.getCropsSelfCheckCode()}]]
                        </h3>
                        <div class="ajs-h-blank-50"></div>
                    </div>
                    <div id="questionBody" >
                        <table class="table">
                            <tbody>
                            <tr>
                                <td></td>
                                <td colspan="2" class="ajs-font-30 questionNum"><span>1</span>번 질문</td>
                            </tr>
                            <tr>
                                <td class="text-right ajs-table-label col-md-3">
                                    자가검증 항목 내역
                                </td>
                                <td class="col-md-6">
                                    <input type="hidden" name="cropsSelfCheckCode">
                                    <div class="form-group">
                                        <input class="form-control" id="selfCheckQuestionContent">
                                    </div>
                                </td>
                                <td class="col-md-3">

                                </td>
                            </tr>
                            <tr>
                                <td class="text-right ajs-table-label col-md-3">
                                    자가검증 질문의 순서
                                </td>
                                <td class="col-md-6">
                                    <div class="form-group">
                                        <input type="text" class="form-control" id="selfCheckQuestionOrder">
                                    </div>
                                </td>
                                <td class="col-md-3">

                                </td>
                            </tr>
                            <tr>
                                <td class="text-right ajs-table-label col-md-3">
                                    자가검증 질문 점수
                                </td>
                                <td class="col-md-6">
                                    <div class="form-group">
                                        <input type="text" class="form-control" id="selfCheckQuestionScore">
                                    </div>
                                </td>
                                <td class="col-md-3">

                                </td>
                            </tr>
                            <tr>
                                <td colspan="2" class="text-right">
                                    <button type="button" class="btn btn-success questionAddBtn">추가</button>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div>
                    <div class="col-md-3"></div>
                    <div class="col-md-6 text-right">
                        <button type="button" class="btn btn-success addQuestionBtn">질문등록하기</button>
                    </div>
                    <div class="col-md-3"></div>
                </div>
            </div>
        </div>
    </div>
</th:block>

<th:block layout:fragment="customJs">
    <script type="text/javascript">

        // 질문 추가 버튼 액션
        $(document).on('click', '.questionAddBtn', function(){
            const addTb = $('.questionAddBtn').closest('table').clone();
            addTb.find('input').val('');
            $('#questionBody').append(addTb);
            const tds = $(addTb).closest('table').prev('table').find('tr').find('td')
            tds.last().children('button').removeClass('questionAddBtn').removeClass('btn-success')
                  .addClass('btn-danger').addClass('questionRemoveBtn').text('삭제');
            let questionNum =  $(addTb).closest('table').prev('table').find('tr').first().find('td').find('span').text();
            let nextNum = parseInt(questionNum) + 1;
            console.log(nextNum);
            $(addTb).closest('table').find('tr').first().find('td').find('span').text(nextNum);
        })

        // 질문 등록 버튼
        $(document).on('click', '.addQuestionBtn', function(){
            location.href = '/adminSelfCheck/question/listVerificationQuestion';
        })

    </script>
</th:block>
</html>



