<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{admin/layout/default_admin}">
<th:block layout:fragment="customContents">
    <div class="row">
        <div class="col-md-12">
            <div class="x_panel">
                <div class="x_title">
                    <h2>자가검증 질문 등록<small>자가검증 질문을 입력하세요.</small></h2>
                    <div class="clearfix"></div>
                </div>
                <div class="x_panel">

                    <div class="row">
                        <h1>
                            <!--/*[[${cropsSelfCheck.getCropsName()}]] <small>자가검증 질문 등록</small>*/-->
                        </h1>
                        <h3>
                           <!--/*<small>자가검증 질문 코드:  </small>[[${cropsSelfCheck.getCropsSelfCheckCode()}]]*/-->
                        </h3>
                        <div class="ajs-h-blank-50"></div>
                    </div>


                    <div id="questionBody" >
                        <form id="demo-form2" data-parsley-validate class="form-horizontal form-label-left">
                            <div class="form-group row">
                                <label class="ajs-text-title control-label col-md-3 col-sm-3 col-xs-12" for="questionNum">#
                                </label>
                                <div id="questionNum" class="ajs-text-title">1</div>

                            </div>
                            <div class="form-group" style="display:none;">
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <input type="text" id="selfCheckQuestionCode" required="required" class="form-control col-md-7 col-xs-12">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="selfCheckQuestionTitleContent">질문 제목<span class="required">*</span>
                                </label>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <input type="text" id="selfCheckQuestionTitleContent" required="required" class="form-control col-md-7 col-xs-12">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="selfCheckQuestionPremiumCheck">특급 질문<span class="required">*</span>
                                </label>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <input type="text" id="selfCheckQuestionPremiumCheck" required="required" class="form-control col-md-7 col-xs-12">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="selfCheckQuestionSuperiorCheck">상급 질문<span class="required">*</span>
                                </label>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <input type="text" id="selfCheckQuestionSuperiorCheck" required="required" class="form-control col-md-7 col-xs-12">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="selfCheckQuestionRegularCheck">일반 질문<span class="required">*</span>
                                </label>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <input type="text" id="selfCheckQuestionRegularCheck" required="required" class="form-control col-md-7 col-xs-12">
                                </div>
                            </div>

                        </form>

                        <table class="table">
                            <tbody>
                            <tr>
                                <td></td>
                                <td colspan="2" class="ajs-font-30 questionNum"><span>1</span>번 질문</td>
                            </tr>

                                <td colspan="2" class="text-right">
                                    <button type="button" class="btn btn-success questionAddBtn">추가</button>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div>
                    <div class="col-md-3"></div>
                    <div class="col-md-6 text-right">
                        <button type="button" class="btn btn-success addQuestionBtn">질문등록하기</button>
                    </div>
                    <div class="col-md-3"></div>
                </div>
            </div>
        </div>
    </div>
</th:block>

<th:block layout:fragment="customJs">
    <script type="text/javascript">

        // 질문 추가 버튼 액션
        $(document).on('click', '.questionAddBtn', function(){
            const addTb = $('.questionAddBtn').closest('table').clone();
            addTb.find('input').val('');
            $('#questionBody').append(addTb);
            const tds = $(addTb).closest('table').prev('table').find('tr').find('td')
            tds.last().children('button').removeClass('questionAddBtn').removeClass('btn-success')
                  .addClass('btn-danger').addClass('questionRemoveBtn').text('삭제');
            let questionNum =  $(addTb).closest('table').prev('table').find('tr').first().find('td').find('span').text();
            let nextNum = parseInt(questionNum) + 1;
            console.log(nextNum);
            $(addTb).closest('table').find('tr').first().find('td').find('span').text(nextNum);
        })

        // 질문 등록 버튼
        $(document).on('click', '.addQuestionBtn', function(){
            location.href = '/adminSelfCheck/question/listVerificationQuestion';
        })

    </script>
</th:block>
</html>



